= Cahier De Recette de l'application IoT
:toc:
:toc-title: Sommaire


== I. Présentation de l'application
[.text-justify]
Cette application IoT (Internet of Things) a pour but de contrôler les conditions ambiantes des entrepôts de l'entreprise REVIVE en traitant des données récupérées depuis des capteurs sur un réseau MQTT.

=== 1. Les utilisateurs :
[.text-justify]
Les utilisateurs de l'application (soit les gérants techniques des entrepôts) peuvent accéder aux fonctionnalités décrites dans le Use-Case suivant :

image::images/uc.png[Use-Case utilisateur]

{empty} +

== II. Architecture

=== 1. Architecture générale :
[.text-justify]
Pour l'application de la banque DailyBank, l'architecture générale est assez simple. Elle est basée sur un fonctionnement centralisé, avec des postes de travails qui sont directement reliés à une base de données.

[.text-justify]
Ces postes de travails sont les ordinateurs où travaillent les employés et les chefs d'agence. Concernant la base de données, elle permet de stocker toutes les informations relatives à l'agence bancaire. Que ce soit les informations des employés, des clients, des comptes et des opérations.


{empty} +

=== 2. Ressources externes :
==== 2.1. Librairies utilisées :
[.text-justify]
L'application repose sur plusieurs librairies externes nécessaires à son fonctionnement.

*Librairies nécessaires :*

* ``JavaFX`` (version 1.8) : permet le développement d'interfaces homme-machine
* ``objdbc6.jar`` : permet la connexion avec une base de données Oracle
* ``cn.wanghaomiao.JsoupXpath`` (version 0.1.1) : permet la manipulation de fichiers HTML
* ``kantega.htmltopdf`` (version 1.1) : permet la conversion de fichiers HTML en fichiers PDF


==== 2.2 Exportation de l'application :
[.text-justify]
L'application est disponible à l'exécution et sans prérequis autre qu'une JRE, sous forme de fichier .jar. Elle peut être régénérée à partir du code source et d'un IDE Java, mais ce dernier devra disposer d'une JRE Java versionnée en 1.8 ainsi que toutes les librairies nécessaires.

[.text-justify]
Pour exécuter l'application en .jar, il faut s'assurer que les postes de travail des employés possèdent une JRE en 1.8. Le répertoire "resource", ainsi que le fichier "SETENV.bat" fournis avec le code source sont nécessaires pour le bon fonctionnement de l'application, *voir la documentation utilisateur* pour plus d'informations.


{empty} +

=== 3. Structuration de l'application :

==== 3.1 Principe retenu pour la structuration du code :
[.text-justify]
Le code de l'application est structuré en plusieurs packages. Les packages Model, View, Controller et Tools. Le principe qui nous a permis de structurer le code de cette manière est le MCV pattern.

[.text-justify]
Modèle-vue-contrôleur ou MVC est un motif d'architecture logiciel destiné aux interfaces graphiques lancé en 1978 et très populaire pour les applications web. Le motif est composé de trois types de modules ayant trois responsabilités différentes : les modèles, les vues et les contrôleurs.

Aperçu :
[source]
----
├── application
    │   ├── control
    │   ├── tools
    │   └── view
    └── model
        ├── data
        └── orm
            └── exception
----

Diagramme de classes :

image::images/DCV2.svg[DCV2]

{empty}


===== Package Application :
[.text-justify]
Le package application correspond à la partie View et la partie Controller avec ses deux packages "view" et "control" par rapport au pattern MVC.

*Principaux sous-packages :*

. *control* -> Fichiers permettant d'afficher les différentes fenêtres.
. *tools* -> Fichiers permettant de gérer certaines parties du code.
. *view* -> Controllers des différentes vues (fenêtres) avec les fichiers fxml correspondants.


===== Package Model :
Le package Model correspond à la partie Model du pattern MVC.

*Principaux sous-packages :*

. *data* -> Fichiers représentant les personnes réelles et l'agence bancaire.
. *orm* -> Fichiers permettant la liaison à la base de données et contient également le sous-package Exception contenant les fichiers java permettant de gérer les exceptions


{empty} +

=== 4. Éléments essentiels :
==== 4.1 Prérequis pour le développeur :
[.text-justify]
Si le code de l'application devait être repris pour être amélioré ou modifié, le développeur devra avoir au préalable une *JRE version 1.8*. Il faudra ensuite qu'il ait un environnement de développement adapté pour cette version de Java et un Workspace configuré avec *Java FX* et potentiellement le logiciel *SceneBuilder* pour modifier les fichiers FXML.

[.text-justify]
L'application utilise une *base de données Oracle-SQL* dont le code de déploiement est fourni avec le code source de l'application. Ce dernier pourra être exécuté dans le cas où une autre base de données serait utilisée, mais il faudra mettre certaines données à jour dans le code source de l'application qu'il sera nécessaire de régénérer par la suite.

[.text-justify]
Ces données concernent la classe "LogToDatabase.java" du sous-package "orm" du package "model". Les lignes 19 à 24 qui devront être modifiées afin de renseigner les nouvelles données de connexion à la base de données utilisée.


==== 4.2 Lancement de l'application :
[.text-justify]
Le poste sur lequel souhaite être lancée l'application avec le fichier "DailyBankApp.jar", devra préalablement disposer d'une JRE versionné en 1.8.

[NOTE]
====
[.text-justify]
Pour toute information concernant l'installation d'une JRE 1.8, merci de bien vouloir vous référer à la *documentation utilisateur*.
====

[.text-justify]
Avant d'exécuter le fichier .jar, il sera nécessaire de changer l'environnement Java du poste concerné avec celle précédemment mentionnée, une fois installée. Pour cela, un fichier "SETENV.bat" est fourni avec le code source, permettant de momentanément changer de JRE. Éditez son contenu en remplaçant le texte entre guillemets de la première ligne par le chemin de la JRE 1.8 du poste concerné, puis sauvegardez les modifications. Pour lancer l'application, il vous faudra impérativement passer par l'exécution de ce fichier .bat.
